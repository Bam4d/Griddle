Version: "0.1"
Environment:
  Name: TestRTS
  Description: An RTS Game. There's aliens and stuff.
  Observers:
    Sprite2D:
      TileSize: 32
      BackgroundTile: oryx/oryx_tiny_galaxy/tg_sliced/tg_world/tg_world_floor_panel_metal_a.png
    Isometric:
      TileSize: [32, 48]
      BackgroundTile: oryx/oryx_iso_dungeon/floor-1.png
      IsoTileHeight: 16
      IsoTileDepth: 4
    Vector:
      IncludePlayerId: true
  Variables:
    - Name: player_resources
      InitialValue: 0
      PerPlayer: true
  Player:
    Count: 2
  Termination:
    Win:
      - eq: [player_resources, 20] # First to 20 resources

  Levels:
    - |
      W  W  W  W  W  W  W  W  W  W  W  W
      W  .  .  H2 .  .  .  .  .  .  .  W
      W  .  H2 .  .  .  .  .  .  .  .  W
      W  H2 .  .  .  M  M  .  .  .  .  W
      W  .  .  .  M  M  M  M  .  .  .  W
      W  .  .  .  .  M  M  .  .  .  H1 W
      W  .  .  .  .  .  .  .  .  H1 .  W
      W  .  .  .  .  .  .  .  H1 .  .  W
      W  W  W  W  W  W  W  W  W  W  W  W

Actions:
  - Name: gather
    Behaviours:
      - Src:
          Object: harvester
          Commands:
            - incr: player_resources
            - incr: resources
            - reward: 1
        Dst:
          Object: minerals
          Commands:
            - decr: resources
            - eq:
                Arguments: [resources, 0]
                Commands:
                  - remove: true


      # Steal resources from other players
#      - Src:
#          Preconditions:
#            - neq: [ src._playerId, dst._playerId ]
#            - gt: [dst.resources, 0]
#          Object: harvester
#          Commands:
#            - incr: resources
#            - reward: 1
#        Dst:
#          Object: harvester
#          Commands:
#            - decr: resources
#            - reward: -1



  - Name: move
    Behaviours:
      - Src:
          Object: harvester
          Commands:
            - mov: _dest # mov will move the object, _dest is the destination location of the action
        Dst:
          Object: _empty

Objects:
  - Name: minerals
    MapCharacter: M
    Variables:
      - Name: resources
        InitialValue: 5
    Observers:
      Sprite2D:
        - Image: oryx/oryx_tiny_galaxy/tg_sliced/tg_items/tg_items_crystal_green.png
      Block2D:
        - Shape: triangle
          Color: [0.0, 1.0, 0.0]
          Scale: 1.0
      Isometric:
        - Image: oryx/oryx_iso_dungeon/minerals-1.png

  - Name: harvester
    MapCharacter: H
    Variables:
      - Name: resources
        InitialValue: 0
      - Name: health
        InitialValue: 10
    Observers:
      Sprite2D:
        - Image: oryx/oryx_tiny_galaxy/tg_sliced/tg_monsters/tg_monsters_jelly_d1.png
      Block2D:
        - Shape: square
          Color: [0.6, 0.2, 0.2]
          Scale: 0.5
      Isometric:
        - Image: oryx/oryx_iso_dungeon/jelly-1.png

  - Name: fixed_wall
    MapCharacter: W
    Observers:
      Sprite2D:
        - TilingMode: WALL_2 # Will tile walls with two images
          Image:
            - oryx/oryx_tiny_galaxy/tg_sliced/tg_world_fixed/img33.png
            - oryx/oryx_tiny_galaxy/tg_sliced/tg_world_fixed/img40.png
      Block2D:
        - Color: [0.5, 0.5, 0.5]
          Shape: square
      Isometric:
        - Image: oryx/oryx_iso_dungeon/wall-grey-1.png
